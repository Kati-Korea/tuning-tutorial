<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>초보자를 위한 버킷 시트 | 누구나 따라 하는 장착·세팅 가이드</title>
  <style>
    :root { --bg:#ffffff; --text:#222; --muted:#666; --primary:#0c6efd; --accent:#f0f4ff; --card:#fafafa; --border:#e5e7eb; --caption-bg:#f8fafc; --caption-text:#6b7280; --ad-bg:#d8d8d8; }
    *{box-sizing:border-box}
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans KR",Arial,"Apple SD Gothic Neo","Malgun Gothic","맑은 고딕",sans-serif;background:var(--bg);color:var(--text);line-height:1.65}
    a{color:var(--primary);text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:1040px;margin:0 auto;padding:24px}
    .partner-inner{max-width:1040px;margin:0 auto;padding:10px 24px;display:flex;align-items:center;gap:14px;flex-wrap:wrap;justify-content:center;text-align:center}
    .partner{display:flex;align-items:center;gap:6px}
    .partner img{height:28px;width:auto;object-fit:contain;display:block}
    .partner .text-box{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:28px}
    .partner .name{font-size:13px;font-weight:600;color:var(--text);margin:0}
    .partner .url{font-size:11px;color:var(--muted);margin:0}
    header .brand{display:flex;align-items:center;gap:8px;flex-wrap:wrap;justify-content:center;text-align:center;width:100%}
    header .brand h1{width:100%;margin:0;font-size:20px;font-weight:700}
    .grid{display:grid;grid-template-columns:1.2fr 2fr;gap:24px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}
    .toc{position:sticky;top:12px;align-self:start;background:var(--card);border:1px solid var(--border);border-radius:10px;padding:16px}
    .toc h3{margin:0 0 12px;font-size:16px;border-bottom:1px dashed var(--border);padding-bottom:8px;text-align:center}
    .toc ol{margin:0;padding-left:16px;font-size:13px;line-height:1.5}
    .toc li{margin:4px 0}
    .back{display:block;width:100%;text-align:center;padding:8px 12px;border-radius:8px;background:#eef2ff;border:1px solid var(--border);color:#1f2937;font-size:14px;font-weight:600;margin-bottom:12px;text-decoration:none}
    .back:hover{filter:brightness(1.03);text-decoration:none}
    .banner-stack{margin-top:12px;display:flex;flex-direction:column;gap:10px}
    .banner{display:grid;grid-template-columns:88px 1fr;gap:10px;width:100%;background:#fff;border:1px solid var(--border);border-radius:10px;padding:10px;text-decoration:none;transition:box-shadow .2s ease,transform .2s ease;align-items:center}
    .banner:hover{box-shadow:0 4px 14px rgba(0,0,0,0.08);transform:translateY(-1px)}
    .banner .content .title{margin:0;font-size:14px;color:var(--text);font-weight:600}
    .banner .content .desc{margin:2px 0 0;font-size:12px;color:var(--muted)}
    .section{background:var(--bg);border:1px solid var(--border);border-radius:10px;padding:16px;margin-bottom:18px;position:relative}
    .section h3{margin:0 0 8px;font-size:18px}
    .section .subtitle{color:var(--muted);margin-bottom:12px;font-size:14px}
    .callout{background:var(--accent);border-left:4px solid var(--primary);padding:10px 12px;border-radius:6px;margin:10px 0;font-size:14px}
    .footer{margin-top:16px;padding:16px 0 40px;color:var(--muted);font-size:13px;border-top:1px solid var(--border)}
    .tag{display:inline-block;border:1px solid var(--border);border-radius:999px;padding:4px 10px;font-size:12px;color:var(--muted);margin-right:6px}
    figure.img-card{margin:8px auto 12px;padding:8px;border:1px solid var(--border);border-radius:10px;background:#fff;width:fit-content}
    .img-376,.img-576,.img-vid,.img-ad{overflow:hidden;border-radius:6px}
    .img-376{width:376px;height:376px}
    .img-576{width:576px;height:576px}
    .img-vid{width:376px;height:211px}
    .img-ad{width:576px;height:776px;border-radius:8px}
    .img-376>img,.img-576>img,.img-vid>img,.img-ad>img{width:100%;height:100%;object-fit:cover;object-position:center;display:block}
    figcaption.credit{margin-top:6px;padding:6px 8px;background:var(--caption-bg);color:var(--caption-text);border:1px dashed var(--border);border-radius:6px;font-size:12px;line-height:1.4}
    figcaption.credit a{color:inherit;text-decoration:underline;text-underline-offset:2px}
    .center{text-align:center}
    .center-inline{display:inline-block}
    .video-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:1000;padding:16px}
    .video-overlay.active{display:flex}
    .video-modal{position:relative;background:#000;border-radius:10px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,0.35);width:min(90vw,1280px);height:min(80vh,720px)}
    .video-modal iframe{width:100%;height:100%;display:block;border:0}
    .video-close{position:absolute;top:8px;right:8px;background:rgba(255,255,255,0.9);color:#111;border:none;border-radius:999px;width:32px;height:32px;font-size:18px;cursor:pointer;line-height:32px;text-align:center;box-shadow:0 2px 6px rgba(0,0,0,0.2)}
    .video-close:hover{background:#fff}
    .video-thumb{cursor:pointer}
    .ad-section{background:var(--ad-bg);border-color:#cfcfcf}
    .ad-card{display:inline-block;padding:10px;border-radius:10px;background:#fff;border:1px solid var(--border)}
    .ad-link{display:inline-block;margin-top:6px;font-size:12px;color:var(--muted)}
    .video-error { position:fixed; left:50%; top:16px; transform:translateX(-50%); background:#fee2e2; color:#991b1b; border:1px solid #fecaca; border-radius:8px; padding:8px 12px; font-size:12px; display:none; z-index:1100; box-shadow:0 6px 16px rgba(0,0,0,0.15); }
    .video-error a { color:#991b1b; text-decoration:underline; }
  </style>
  <link rel="icon" href="/logo_Icon.ico">
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <h1>초보자를 위한 버킷 시트 · 장착·세팅 가이드</h1>
        <span class="tag">입문용</span>
        <span class="tag">한국 기준</span>
      </div>
      <div class="partner-inner">
        <a class="partner" href="http://www.katiagroup.or.kr/" target="_blank" rel="noopener" aria-label="KATIA">
          <img src="../image/logo_new.png" alt="KATIA 로고">
          <div class="text-box">
            <div class="name">Korea Auto Tuning Industry Association</div>
            <div class="url">www.katiagroup.or.kr</div>
          </div>
        </a>
        <a class="partner" href="http://www.kal.ac.kr" target="_blank" rel="noopener" aria-label="KAL">
          <img src="../image/kal_logo.png" alt="KAL 로고">
          <div class="text-box">
            <div class="name">KAL</div>
            <div class="url">www.kal.ac.kr</div>
          </div>
        </a>
      </div>
    </header>

    <div class="grid">
      <nav class="toc">
        <a class="back" href="../menu03.html" aria-label="이전 페이지로">← 이전 페이지</a>
        <h3>초보자를 위한 버킷 시트<br>장착·세팅 가이드</h3>
        <h3>▣ 목 차 ▣</h3>
        <ol>
          <li><a href="#cover">표지</a></li>
          <li><a href="#can-do">이 가이드로 무엇을 할 수 있나요?</a></li>
          <li><a href="#intro">버킷 시트 핵심 가치</a></li>
          <li><a href="#system">유형·구성·KPI</a></li>
          <li><a href="#ergonomics">인체공학/자세</a></li>
          <li><a href="#structure">구조/재료</a></li>
          <li><a href="#mounting-arch">장착 아키텍처</a></li>
          <li><a href="#safety">하네스·에어백·앵커</a></li>
          <li><a href="#prep">사전 설계/준비</a></li>
          <li><a href="#sop">시공 SOP</a></li>
          <li><a href="#setup">세팅/캘리브레이션</a></li>
          <li><a href="#qa">검수/시운전</a></li>
          <li><a href="#maintenance">유지관리/내구</a></li>
          <li><a href="#advanced">고급 토픽</a></li>
          <li><a href="#cost">비용/패키징</a></li>
          <li><a href="#ncs">NCS 직무역량·평가</a></li>
          <li><a href="#labs">실습 시나리오</a></li>
          <li><a href="#troubleshoot">트러블슈팅 사례</a></li>
          <li><a href="#appendix">부록 A~C</a></li>
        </ol>

        <div class="banner-stack" aria-label="권장 링크 배너">
          <a class="banner" href="https://www.google.com/search?q=bucket+seat+driving+position" target="_blank" rel="noopener">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0c/Racing_seat.jpg/320px-Racing_seat.jpg" style="width:80px;height:60px;object-fit:cover;border-radius:8px;border:1px solid var(--border);display:block" alt="레이싱 시트">
            <div class="content">
              <p class="title">운전 자세 가이드</p>
              <p class="desc">버킷 시트 포지션</p>
            </div>
          </a>
          <a class="banner" href="https://www.google.com/search?q=seat+rail+slider+assembly" target="_blank" rel="noopener">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Seat_Rails.jpg/320px-Seat_Rails.jpg" style="width:80px;height:60px;object-fit:cover;border-radius:8px;border:1px solid var(--border);display:block" alt="시트 레일">
            <div class="content">
              <p class="title">레일/브라켓</p>
              <p class="desc">슬라이더 구조 이해</p>
            </div>
          </a>
          <a class="banner" href="https://main.kotsa.or.kr/main.do" target="_blank" rel="noopener">
            <img src="https://main.kotsa.or.kr/web/images/common/logo.svg" style="width:80px;height:60px;object-fit:cover;border-radius:8px;border:1px solid var(--border);display:block" alt="TS한국교통안전공단 로고">
            <div class="content">
              <p class="title">구조변경/검사</p>
              <p class="desc">법규 확인</p>
            </div>
          </a>
        </div>
      </nav>

      <main>
        <section id="cover" class="section">
          <div class="center">
            <figure class="img-card center-inline">
              <div class="img-576">
                <img src="https://images.unsplash.com/photo-1511919884226-fd3cad34687c?q=80&w=1200&auto=format&fit=crop" alt="버킷 시트 컨셉 이미지">
              </div>
               <div class="ad-link">표지 · 출처: Unsplash</div>
            </figure>
          </div>
        </section>

        <section id="can-do" class="section" data-index="1">
          <h3>01. 이 가이드로 무엇을 할 수 있나요?</h3>
          <div class="subtitle">초보 오너를 위한 실전 범위</div>
          <ul>
            <li>버킷 시트의 가치와 유형 이해</li>
            <li>차종별 장착 아키텍처·브라켓/레일 선택</li>
            <li>운전 자세 세팅·체압/시야/안전 균형 맞추기</li>
            <li>하네스·에어백·앵커 연계 안전 설계 포인트</li>
            <li>법규/보험 리스크 및 문서화 항목 파악</li>
          </ul>
          <div class="center">
            <figure class="img-card center-inline">
              <div class="img-376">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/13/Recaro_seat_01.jpg/512px-Recaro_seat_01.jpg" alt="버킷 시트 예시">
              </div>
               <div class="ad-link">버킷 시트 · 출처: Wikimedia</div>
            </figure>
          </div>
        </section>

        <section id="intro" class="section" data-index="2">
          <h3>02. 버킷 시트 핵심 가치</h3>
          <ul>
            <li>코너/제동 하중에서 상체·골반 지지로 운전 입력의 일관성 향상</li>
            <li>하네스와 결합 시 서브마리닝 억제·사고 시 체간 이탈 감소</li>
            <li>일상/트랙 겸용은 정숙성·승하차성·에어백 호환성 균형이 핵심</li>
          </ul>
        </section>

        <section id="system" class="section" data-index="3">
          <h3>03. 유형·구성·KPI</h3>
          <ul>
            <li><strong>유형</strong>: 풀 버킷(일체형·지지 강함·경량), 세미 버킷(리클라인·일상 우수)</li>
            <li><strong>구성</strong>: 시트 셸(FRP/CFRP/튜브), 폼/커버, 사이드/플랫 브라켓, 슬라이더 레일, 하네스·앵커, 에어백/센서</li>
            <li><strong>KPI</strong>: 질량[kg], 측지지/체압 분포, 좌면 높이[mm], 등판 각[deg], 슬라이더 강성/유격, 내구(사이클), 소음/진동</li>
          </ul>
          <div class="center">
            <figure class="img-card center-inline">
              <div class="img-376">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b1/Carbon_fiber_composite.jpg/512px-Carbon_fiber_composite.jpg" alt="CFRP 재료">
              </div>
              <div class="ad-link">CFRP · 출처: Wikimedia</div>
            </figure>
          </div>
        </section>

        <section id="ergonomics" class="section" data-index="4">
          <h3>04. 인체공학/자세</h3>
          <ul>
            <li>페달 말단에서 무릎 10–15도 굽힘, 클러치/브레이크 동시 고려</li>
            <li>스티어링 9-3 그립 시 팔꿈치 120–135도, 어깨는 등판 밀착</li>
            <li>골반 중립·요추 지지·머리 정렬, 헤드레스트 접촉 확보</li>
            <li>체압 분포 균등, 장거리 피로 줄이는 폼 경도 조합</li>
            <li>H-Point 최적화로 시야·제어감 확보, 헬멧 간극 확인</li>
          </ul>
          <div class="center">
            <figure class="img-card center-inline">
              <div class="img-376">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/SAE_Manikins_1.PNG/512px-SAE_Manikins_1.PNG" alt="운전 자세 개념">
              </div>
              <div class="ad-link">인체공학 개념 · 출처: Wikimedia</div>
            </figure>
          </div>
        </section>

        <section id="structure" class="section" data-index="5">
          <h3>05. 구조/재료</h3>
          <ul>
            <li>FRP: 가성비·수리성, 무게 중간</li>
            <li>CFRP: 경량·고강도·고가, FIA 인증 등급 유리</li>
            <li>튜브 프레임: 내구·유연하나 무게↑</li>
            <li>브라켓/레일: Al 6061/7075, 스틸 SPHC/SUS, 단계 홀로 각·높이 조절</li>
            <li>체결: ISO 8.8/10.9 볼트, 규정 토크+나일록/스프링와셔</li>
          </ul>
        </section>

        <section id="mounting-arch" class="section" data-index="6">
          <h3>06. 장착 아키텍처</h3>
          <ul>
            <li>OEM 앵커 포인트 우선, 신설 시 리인포스먼트 플레이트 필수</li>
            <li>사이드마운트(풀 버킷 표준) vs 플랫마운트(세미버킷 대응)</li>
            <li>슬라이더→브라켓→시트 순 결합, 관통 볼트 길이·접촉면 평행 관리</li>
          </ul>
          <div class="center">
            <figure class="img-card center-inline">
              <div class="img-376">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b3/Car_seat_brackets.jpg/512px-Car_seat_brackets.jpg" alt="사이드 마운트 브라켓">
              </div>
              <div class="ad-link">브라켓 · 출처: Wikimedia</div>
            </figure>
          </div>
        </section>

        <section id="safety" class="section" data-index="7">
          <h3>07. 하네스·에어백·앵커</h3>
          <ul>
            <li>하네스: 4/5/6점, 어깨 -0~ -20도, 랩 45~65도, 서브스트랩으로 서브마리닝 방지</li>
            <li>에어백: SRS 경고·검사/보험 리스크 → 호환 좌석/저항 모듈/유지형 세미버킷 검토</li>
            <li>앵커: 하네스 바/롤케이지 연계, 플레이트 두께·용접 기준 준수</li>
            <li>ISOFIX/후석 접근: 2도어 승하차 경로·폴딩 기능 고려</li>
          </ul>
        </section>

        <section id="prep" class="section" data-index="8">
          <h3>08. 사전 설계/준비</h3>
          <ul>
            <li>신체 치수: 어깨/골반/대퇴 폭·허벅지 길이·헬멧 높이 채중</li>
            <li>차량 패키징: 바닥 높이·터널 간섭·센서/커넥터 위치</li>
            <li>부품 스펙시트: 볼트 규격(M8x1.25 10.9 등), 토크표, 홀 간격, 레일 스트로크</li>
            <li>위험분석: 충돌 하중 경로, 화재/단락, 레일 잠금 실패 방지</li>
          </ul>
        </section>

        <section id="sop" class="section" data-index="9">
          <h3>09. 시공 SOP</h3>
          <ol>
            <li>안전/준비: 배터리 분리, 에어백 경고 저장, 토크 공구 검교정</li>
            <li>순정 탈거: SRS 커넥터 분리, 볼트 토크 기록, 배선 보호</li>
            <li>브라켓/레일 조립: 좌우 평행도·그리스/방청·락 확인</li>
            <li>시트 체결: 사이드마운트 각 세팅, 볼트 삽입 길이 1.5D 확보</li>
            <li>하네스/앵커: 용접/볼트-스로우 플랜, 각도·길이 조정</li>
            <li>전기/센서: 에어백 저항 모듈/착좌 센서/벨트 버클 이식</li>
            <li>검수: 슬라이더 락, 유격/소음, 페달·핸들 간섭, 급제동/사선 가속 테스트</li>
          </ol>
          <div class="center">
            <figure class="img-card center-inline">
              <div class="img-vid video-thumb" data-video-id="Q3Ciw5iWcRo" role="button" aria-label="버킷 시트 설치 영상 재생">
                <img src="https://i.ytimg.com/vi/Q3Ciw5iWcRo/hqdefault.jpg" alt="버킷 시트 설치 썸네일">
              </div>
               <div class="ad-link">설치 예시 · 출처: YouTube</div>
            </figure>
          </div>
        </section>

        <section id="setup" class="section" data-index="10">
          <h3>10. 세팅/캘리브레이션</h3>
          <ul>
            <li>좌면 높이·등판 각·핸들 거리/각·페달 스트로크 말단 무릎각 캘리브레이션</li>
            <li>롤센터 시감·헤드레스트 접촉·미러 시야 확보</li>
            <li>트랙/스트리트 전환: 등받이 각·슬라이더 위치 프리셋</li>
          </ul>
        </section>

        <section id="qa" class="section" data-index="11">
          <h3>11. 검수/시운전</h3>
          <ul>
            <li>소음/진동/삐걱 점검, 체결 토크 재확인(열안정 후 리타이트)</li>
            <li>체압 측정 매트 활용, 급제동·슬라럼에서 체간 지지 확인</li>
            <li>SRS 경고 여부, 센서/버클 신호 정상 확인</li>
          </ul>
        </section>

        <section id="maintenance" class="section" data-index="12">
          <h3>12. 유지관리/내구</h3>
          <ul>
            <li>체결부 토크 주기 점검, 프레임 균열·브라켓 변형 검사</li>
            <li>레일 윤활/유격, 폼·커버 마모/오염 관리</li>
            <li>소음/진동 발생 시 접촉면 재세팅·아이솔레이션 추가</li>
          </ul>
        </section>

        <section id="advanced" class="section" data-index="13">
          <h3>13. 고급 토픽</h3>
          <ul>
            <li>롤케이지/하네스 바 연계, HANS/헬멧 간극 확보</li>
            <li>FIA 인증 운영, 트랙 전용 포지션과 차내 소화기/컷오프 스위치 배치</li>
          </ul>
        </section>

        <section id="cost" class="section" data-index="14">
          <h3>14. 비용/패키징</h3>
          <ul>
            <li>등급별 구성: FRP(가성비) · CFRP(경량/고가) · 튜브(내구)</li>
            <li>공임 요소: 차종 레일 호환, 브라켓 가공, SRS·배선 작업 난도</li>
            <li>옵션: 히ー터/통풍, 스웨이드/레더, 로고 자수, 하네스 패드</li>
          </ul>
        </section>

        <section id="ncs" class="section" data-index="15">
          <h3>15. NCS 직무역량·평가</h3>
          <ul>
            <li>요구분석/설계: 치수 채중·패키징·법규 검토</li>
            <li>제작/시공: 체결·토크·레일 정렬, 전기/센서 이식</li>
            <li>검증/문서화: 시운전·체압/소음 계측, 인수서 패키지</li>
          </ul>
          <ul>
            <li>체결 토크 합격, 유격/소음 0, SRS 정상</li>
            <li>자세 KPI(무릎·팔꿈치 각·H-Point) 목표치 달성</li>
            <li>문서화 100%(도면·토크·사진·로그)</li>
          </ul>
        </section>

        <section id="labs" class="section" data-index="16">
          <h3>16. 실습 시나리오(예시)</h3>
          <ul>
            <li>실습 A: 사이드마운트 풀 버킷 장착(레일 정렬·토크)</li>
            <li>실습 B: 세미버킷+에어백 유지형 배선 이식</li>
            <li>실습 C: 하네스 바 설치/앵커 보강</li>
            <li>실습 D: 체압 매핑·자세 캘리브레이션</li>
            <li>실습 E: 소음/진동 진단 및 해결</li>
          </ul>
        </section>

        <section id="troubleshoot" class="section" data-index="17">
          <h3>17. 트러블슈팅 사례</h3>
          <ul>
            <li>승하차 불편: 등판 각·좌면 높이·슬라이더 위치 조정</li>
            <li>유격/소음: 체결 토크/와셔·접촉면 평행 재점검</li>
            <li>SRS 경고: 저항 모듈·센서 신호 확인, 배선 단락 점검</li>
            <li>허리 통증: 요추 지지/폼 경도·쿠션 추가</li>
          </ul>
        </section>

        <section id="appendix" class="section" data-index="18">
          <h3>18. 부록 A ~ C</h3>
          <ul>
            <li><strong>부록 A</strong> 체크리스트/토크/로그: 볼트 규격·토크표, 레일 락 확인, 시운전 로그</li>
            <li><strong>부록 B</strong> 권장 부품/공구/링크: 브라켓·레일·하네스, 토크 렌치, 체압 매트</li>
            <li><strong>부록 C</strong> 용어집·FAQ: H-Point, 서브마리닝, ISO 10.9, 사이드마운트 등</li>
          </ul>
        </section>

        <section class="section ad-section">
          <div class="center">
            <div class="ad-card">
              <a href="https://www.google.com/search?q=bucket+seat+side+mount+brackets+kit" target="_blank" rel="noopener" aria-label="브라켓 키트 검색">
                <div class="img-ad">
                  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/Car_racing_seat.jpg/512px-Car_racing_seat.jpg" alt="레이싱 시트">
                </div>
              </a>
              <div class="ad-link">버킷 시트/브라켓 키트 · 출처: Wikimedia</div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <div class="footer">
      <div class="center">실제 작업 시 차량 서비스 매뉴얼과 국내 법규(구조변경·SRS·보험)를 반드시 확인하세요.</div>
    </div>
  </div>

  <div class="video-error" id="videoError" role="alert" aria-live="polite">
    동영상 임베드가 제한되어 재생할 수 없습니다. 아래 링크로 YouTube에서 직접 보세요.
    <a id="videoOpenLink" href="#" target="_blank" rel="noopener">YouTube에서 열기</a>
  </div>

  <div class="video-overlay" id="videoOverlay" aria-hidden="true">
    <div class="video-modal" role="dialog" aria-modal="true" aria-label="영상 재생">
      <button class="video-close" id="videoClose" aria-label="닫기">✕</button>
      <iframe id="videoFrame"
              src=""
              title="YouTube video player"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen"
              allowfullscreen>
      </iframe>
    </div>
  </div>

  <script>
    function buildEmbedUrl(videoId, startSec, useNoCookie, autoplay = true, muted = true, controls = 1, playsinline = 1) {
      if (!videoId) return null;
      const base = useNoCookie ? 'https://www.youtube-nocookie.com' : 'https://www.youtube.com';
      const params = new URLSearchParams({
        rel: '0', modestbranding: '1', playsinline: String(playsinline),
        controls: String(controls), enablejsapi: '1', origin: window.location.origin,
      });
      if (autoplay) params.set('autoplay', '1');
      if (muted) params.set('mute', '1');
      if (startSec) {
        const s = String(startSec).replace('s','');
        if (/^\d+$/.test(s)) params.set('start', s);
      }
      return `${base}/embed/${videoId}?${params.toString()}`;
    }
    function extractVideoId(raw) {
      if (!raw) return null;
      if (/^[A-Za-z0-9_-]{6,}$/.test(raw) && !raw.includes('http')) return raw;
      try {
        const url = new URL(raw);
        const host = url.hostname.replace('www.', '');
        if (host.includes('youtu.be')) return url.pathname.slice(1);
        if (host.includes('youtube')) {
          if (url.pathname === '/watch') return url.searchParams.get('v');
          if (url.pathname.startsWith('/shorts/')) return url.pathname.split('/')[2];
          if (url.pathname.startsWith('/embed/')) return url.pathname.split('/')[2];
        }
      } catch(e) {
        const m = String(raw).match(/(?:youtu\.be\/|v=|\/shorts\/|\/embed\/)([A-Za-z0-9_-]{6,})/);
        if (m) return m[1];
      }
      return null;
    }
    const overlay = document.getElementById('videoOverlay');
    const frame = document.getElementById('videoFrame');
    const btnClose = document.getElementById('videoClose');
    const errorBanner = document.getElementById('videoError');
    const openLink = document.getElementById('videoOpenLink');
    let lastVideoId = null, lastStart = null, lastOriginalUrl = null;
    let player = null, lastFocused = null;
    function showError(originalUrl) {
      if (!errorBanner) return;
      openLink.href = originalUrl || (lastVideoId ? `https://www.youtube.com/watch?v=${lastVideoId}` : '#');
      errorBanner.style.display = 'block';
      clearTimeout(showError._t);
      showError._t = setTimeout(() => { errorBanner.style.display = 'none'; }, 8000);
    }
    function trapFocus(e) {
      if (!overlay.classList.contains('active')) return;
      const focusable = overlay.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
      if (!focusable.length) return;
      const first = focusable[0], last = focusable[focusable.length - 1];
      if (e.key === 'Tab') {
        if (e.shiftKey && document.activeElement === first) { e.preventDefault(); last.focus(); }
        else if (document.activeElement === last) { e.preventDefault(); first.focus(); }
      }
    }
    function openOverlay() { lastFocused = document.activeElement; overlay.classList.add('active'); overlay.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; btnClose.focus(); document.addEventListener('keydown', trapFocus); }
    function closeOverlay() { overlay.classList.remove('active'); overlay.setAttribute('aria-hidden','true'); document.body.style.overflow=''; document.removeEventListener('keydown', trapFocus); try{ if(player&&player.destroy) player.destroy(); }catch(e){} player=null; frame.src=''; if(lastFocused&&lastFocused.focus) lastFocused.focus(); }
    let YTReady=false, YTLoading=false; const onYTReadyCbs=[];
    function loadYT(){ if(YTReady||YTLoading) return; YTLoading=true; const tag=document.createElement('script'); tag.src="https://www.youtube.com/iframe_api"; tag.async=true; document.head.appendChild(tag); window.onYouTubeIframeAPIReady=function(){ YTReady=true; YTLoading=false; onYTReadyCbs.splice(0).forEach(cb=>cb()); }; }
    function whenYTReady(cb){ if(YTReady && window.YT && window.YT.Player) cb(); else onYTReadyCbs.push(cb); }
    function createPlayer(videoId, start, useNoCookie, autoplay=true, muted=true){
      frame.src = buildEmbedUrl(videoId, start, useNoCookie, autoplay, muted);
      loadYT();
      return new Promise((resolve,reject)=>{
        whenYTReady(()=>{
          try{
            player = new YT.Player('videoFrame',{events:{
              onReady:(e)=>{ try{ if(muted&&e.target.mute) e.target.mute(); if(start&&e.target.seekTo){ const s=parseInt(String(start).replace('s',''),10); if(!Number.isNaN(s)) e.target.seekTo(s,true);} const st=e.target.playVideo&&e.target.playVideo(); if(st&&typeof st.then==='function'){ st.then(()=>resolve('played')).catch(reject);} else { setTimeout(()=>resolve('played'),300);} }catch(err){reject(err);} },
              onError:(ev)=>reject(new Error('YT Player Error:'+ (ev&&ev.data)))
            }});
          }catch(err){reject(err);}
        });
      });
    }
    async function tryPlaySequence({id,start,originalUrl}){
      lastVideoId=id; lastStart=start; lastOriginalUrl=originalUrl;
      openOverlay();
      try{ await createPlayer(id,start,false,true,true); return; }
      catch(e1){ try{ await createPlayer(id,start,true,true,true); return; }
        catch(e2){ closeOverlay(); showError(originalUrl || (id?`https://www.youtube.com/watch?v=${id}`:'#')); } }
    }
    document.addEventListener('click',(e)=>{ const t=e.target.closest('.video-thumb'); if(t){ const raw=t.getAttribute('data-video-id'); const id=extractVideoId(raw); const start=t.getAttribute('data-start')||null; tryPlaySequence({id, start, originalUrl: raw}); }});
    btnClose && btnClose.addEventListener('click', closeOverlay);
    document.addEventListener('keydown',(e)=>{ if(e.key==='Escape'&&overlay.classList.contains('active')) closeOverlay(); });
  </script>
</body>
</html>